# runn入門書作成プロジェクト

## プロジェクト概要
runn（https://github.com/k1LoW/runn）のe2eテストツールの入門書を作成する。作成した文書はGitHub Pagesで公開される。

## 基本方針
- **言語**: すべて日本語で記述
- **サンプルコード**: すべてGitHub Actionsで検証し、動作を保証
- **公開方法**: GitHub Pages
- **対象読者**: runnを初めて使う開発者、e2eテストを導入したいチーム

## runnの概要
runnはk1LoWによって開発されたシナリオベースのテスト・自動化ツール。以下の特徴を持つ：

1. **マルチプロトコル対応**
   - HTTP/HTTPS
   - gRPC
   - データベース（PostgreSQL、MySQL、SQLite3、Cloud Spanner）
   - CDP（Chrome DevTools Protocol）
   - SSH

2. **柔軟な式評価エンジン**
   - expr-lang/exprを採用
   - 変数参照（vars、steps、current、previous等）
   - 豊富なビルトイン関数

3. **CI/CDフレンドリー**
   - シングルバイナリ
   - GitHub Actions対応
   - 並行実行制御

## 記述すべき内容

### 1. 基礎編
- runnとは何か
- インストール方法
- 基本的な使い方（CLIコマンド）
- はじめてのシナリオ作成

### 2. シナリオ記述編
- Runbookの基本構造
- YAMLフォーマット（リスト形式とマップ形式）
- 変数の定義と参照
- ステップの記述方法

### 3. Expression（式）文法編
- expr-lang/exprの基本
- 変数参照の詳細
  - vars（シナリオ変数）
  - steps（ステップの戻り値）
  - current/previous（現在/前のステップ）
  - env（環境変数）
  - parent（親runbook）
- 条件式とフィルタリング
- 配列・マップ操作

### 4. ビルトイン関数編
- 比較・差分関数（compare、diff）
- データ操作関数（pick、omit、merge、intersect）
- 文字列処理（urlencode、toBase64）
- ファイル操作（file）
- 時間処理（time）
- テストデータ生成（faker.*）

### 5. ランナー詳細編

#### HTTPランナー
- 基本的なリクエスト
- ヘッダー、ボディの設定
- レスポンスの検証
- OpenAPI v3バリデーション

#### データベースインテグレーション
- 対応データベース一覧
- 接続文字列の書き方
- クエリ実行とレスポンス処理
- トランザクション制御

#### gRPCランナー
- proto定義の読み込み
- メッセージの送信
- ストリーミング対応

#### CDPランナー
- ブラウザ操作の基本
- アクション一覧
- スクリーンショット取得

#### SSHランナー
- 接続設定
- コマンド実行
- 出力の検証

### 6. 高度な機能編
- ループ処理とリトライ
- 条件付き実行（if文）
- シナリオのインクルード
- 並行実行制御（concurrency）
- 依存関係の定義（needs）
- カスタムランナーの作成

### 7. テストヘルパーとしての利用
- Go言語での組み込み方法
- テストデータの準備
- CI/CDとの統合

### 8. 実践編
- よくあるユースケース
- ベストプラクティス
- デバッグ方法
- パフォーマンスチューニング

### 9. リファレンス
- YAMLスキーマ
- 全ビルトイン関数一覧
- エラーメッセージ一覧
- FAQ

## サンプルコードの検証
- すべてのサンプルコードは`examples/`ディレクトリに配置
- GitHub Actionsで自動テストを実施
- 動作確認済みバージョンを明記

## ビルドとテストの実行
- `make build` - ドキュメントのビルド
- `make generate-outputs` - *.out ファイルの生成（YAMLファイルの実行結果を生成）
- `make serve` - ローカルでドキュメントをプレビュー
- `make test` - すべてのrunnサンプルをテスト

## Git操作の重要なルール
- **masterブランチへの直接コミットは禁止**
- 必ず新しいブランチを作成してからコミットし、プルリクエストを送る
- ブランチ名は作業内容を表す分かりやすい名前にする（例: `fix-yaml-formatting`, `add-chapter10`）

## 執筆上の注意点
- 初心者にも分かりやすい説明を心がける
- 実践的な例を多く含める
- 図解を積極的に使用
- エラーケースと対処法も記載